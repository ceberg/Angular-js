<!doctype html>
<html>
<head>
	<script src='js/angular-1.3.0.js'></script>
	<meta charset='utf-8'>
</head>
<body ng-app='myApp' ng-controller='myCtrl'>
	<div>
		<greeting greet="sayHello(name)"></greeting>
		<greeting greet="sayHello(name)"></greeting>
		<greeting greet="sayHello(name)"></greeting>
	</div>
	
<script type="text/javascript">
	var myModule=angular.module('myApp',[])
	myModule.controller('myCtrl',['$scope',function($scope){
		$scope.sayHello=function(name){
			alert('hello'+name)
		}
	}])
	myModule.directive('greeting',function(){
		return{
			restrict:'AE',
			scope:{greet:'&'},
			template:'<input type="text" ng-model="userName"/><br/>'+
				"<button ng-click='greet({name:userName})'>Greeting</button><br/>"
		}
	})

</script>
</body>
</html>